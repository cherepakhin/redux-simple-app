import { createRemoveTaskAction }  from "../store/actions";
import { useState } from 'react';

const DeleteConfirmDlg = ({id, title}) => {
  const [showDeleteConfirmDlg, setShowDeleteConfirmDlg] = useState(false);

  const handleCancelDeleteConfirmDlg = () => {
    console.log("before handleCloseDeleteConfirmDlg showDeleteConfirmDlg=" + showDeleteConfirmDlg);
    setShowDeleteConfirmDlg(false);
    console.log("after handleCloseDeleteConfirmDlg showDeleteConfirmDlg=" + showDeleteConfirmDlg);
    console.log("delete task id=" + id);
  }

  const handleConfirmDeleteConfirmDlg = () => {
    console.log("before handleConfirmDeleteConfirmDlg showDeleteConfirmDlg=" + showDeleteConfirmDlg);
    setShowDeleteConfirmDlg(false);
    console.log("after  handleConfirmDeleteConfirmDlg showDeleteConfirmDlg=" + showDeleteConfirmDlg);
    console.log("delete task id=" + id);

    if(id < 0) {
      console.log("i<0 delete task id=" + id);
    } else {
      console.log("delete task id=" + id);
      // delete task
      dispatch(createRemoveTaskAction(id));
    };
  }

  return (
      <Modal show={showDeleteConfirmDlg} className="rounded-0">
        <Modal.Header closeButton>
          <Modal.Title>Удалить?</Modal.Title>
        </Modal.Header>
        <Modal.Body>{"{id: "+id+", title: '"+title+"'}?"}</Modal.Body>
        <Modal.Footer>
            <Button className="col-2" variant="primary" onClick={handleConfirmDeleteConfirmDlg}>Да</Button>
            <Button className="col-2" variant="secondary" onClick={handleCancelDeleteConfirmDlg}>Нет</Button>
        </Modal.Footer>
      </Modal>
  );

}

DeleteConfirmDlg.propTypes = {
  id: React.PropTypes.number.isRequired,
  title: React.PropTypes.string.isRequired
}).isRequired

export default DeleteConfirmDlg;